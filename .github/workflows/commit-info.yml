name: Commit Information Display

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  commit-info:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      with:
        fetch-depth: 2
        
    - name: Display Commit Information
      run: |
        echo "üìã COMMIT INFORMATION"
        echo "===================="
        echo "üîß Commit SHA: ${{ github.sha }}"
        echo "üìù Message: ${{ github.event.head_commit.message }}"
        echo "üë§ Author: ${{ github.event.head_commit.author.name }}"
        echo "üìß Email: ${{ github.event.head_commit.author.email }}"
        echo "üïí Timestamp: ${{ github.event.head_commit.timestamp }}"
        echo "üåø Branch: ${{ github.ref_name }}"
        echo "üìÅ Repository: ${{ github.repository }}"
        echo ""
        echo "üìä CHANGES"
        echo "=========="
        echo "Modified files:"
        git diff --name-only HEAD~1 HEAD || echo "No previous commit found"
        echo ""
        echo "üìà Stats:"
        git diff --stat HEAD~1 HEAD || echo "No previous commit found"
        
    - name: Files Changed
      run: |
        echo "üìÇ DETAILED CHANGES"
        echo "==================="
        if git rev-parse HEAD~1 >/dev/null 2>&1; then
          git diff --name-status HEAD~1 HEAD
        else
          echo "Initial commit - all files are new"
        fi
        
    - name: Deployment Status
      run: |
        echo ""
        echo "üöÄ DEPLOYMENT STATUS"
        echo "===================="
        echo "‚úÖ GitHub Pages: https://aebonlee.github.io/ToDoList"
        echo "‚è≥ Render (Frontend): https://todolist-dhlt.onrender.com"
        echo "‚è≥ Render (Backend): https://todolist-dhlt-gc0d.onrender.com"
        echo ""
        echo "üìù Next Steps:"
        echo "1. Monitor Render deployment"
        echo "2. Check build logs if deployment fails"
        echo "3. Verify environment variables in Render dashboard"